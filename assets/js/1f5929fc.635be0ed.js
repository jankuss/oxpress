"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[103],{5125:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return p},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return l},default:function(){return c}});var i=n(7462),o=n(3366),r=(n(7294),n(3905)),a=["components"],p={sidebar_position:2},s="Usage",u={unversionedId:"getting-started/usage",id:"getting-started/usage",isDocsHomePage:!1,title:"Usage",description:"1. Specifying input and output files",source:"@site/docs/getting-started/usage.md",sourceDirName:"getting-started",slug:"/getting-started/usage",permalink:"/oxpress/docs/getting-started/usage",editUrl:"https://github.com/jankuss/oxpress/edit/master/docs/docs/getting-started/usage.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Installation",permalink:"/oxpress/docs/getting-started/installation"},next:{title:"Configuration",permalink:"/oxpress/docs/configuration"}},l=[{value:"1. Specifying input and output files",id:"1-specifying-input-and-output-files",children:[]},{value:"2. Running the generator",id:"2-running-the-generator",children:[]},{value:"3. Wrapping your application",id:"3-wrapping-your-application",children:[]}],d={toc:l};function c(e){var t=e.components,n=(0,o.Z)(e,a);return(0,r.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"usage"},"Usage"),(0,r.kt)("h2",{id:"1-specifying-input-and-output-files"},"1. Specifying input and output files"),(0,r.kt)("p",null,"Check the ",(0,r.kt)("inlineCode",{parentName:"p"},"oxpress.config.js")," file, which was initialized in the previous step.\nIt should look like the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'module.exports = {\n  output: "./oxpress.generated.ts",\n  input: "./openapi.yaml",\n};\n')),(0,r.kt)("p",null,"where:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"input")," points to your OpenAPI Document"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"output")," is the path to the generated output file")),(0,r.kt)("p",null,"Modify both of these settings to fit your needs.\nLet's say our input file is named differently (",(0,r.kt)("inlineCode",{parentName:"p"},"test.openapi.yaml"),") and our output should go into a ",(0,r.kt)("inlineCode",{parentName:"p"},"src")," folder.\nThen this config should look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'module.exports = {\n  output: "./src/oxpress.generated.ts",\n  input: "./test.openapi.yaml",\n};\n')),(0,r.kt)("p",null,"To learn more about all the different available options, check out the ",(0,r.kt)("a",{parentName:"p",href:"/docs/configuration"},"Configuration")," section."),(0,r.kt)("h2",{id:"2-running-the-generator"},"2. Running the generator"),(0,r.kt)("p",null,"To generate the oxpress types, run the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npx oxpress generate\n")),(0,r.kt)("p",null,"This will write the oxpress types into the specified file. You can now use oxpress with your Express application."),(0,r.kt)("h4",{id:"running-the-generator-in-watch-mode"},"Running the generator in watch mode"),(0,r.kt)("p",null,"In case you are actively changing the underlying OpenAPI document, it might be handy to run the generator in watch mode.\nYou can do this by running:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npx oxpress generate --watch\n")),(0,r.kt)("p",null,"Now, the generated oxpress types will always be in sync with your OpenAPI document."),(0,r.kt)("h2",{id:"3-wrapping-your-application"},"3. Wrapping your application"),(0,r.kt)("p",null,"To have the generated types within your express application, ",(0,r.kt)("inlineCode",{parentName:"p"},"oxpress")," provides a ",(0,r.kt)("inlineCode",{parentName:"p"},"wrap")," function.\nThis ",(0,r.kt)("inlineCode",{parentName:"p"},"wrap")," function will return a typed version of your express ",(0,r.kt)("inlineCode",{parentName:"p"},"Application")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Router"),"."),(0,r.kt)("p",null,"The following snippet shows the usage of the ",(0,r.kt)("inlineCode",{parentName:"p"},"wrap")," function."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import * as express from "express";\nimport { wrap } from "./oxpress.generated";\n\nconst app = express();\nconst router = wrap(app);\n\nrouter.get("/v1/users/:userId", (req, res) => {\n    res.status(200).json({\n        age: 21,\n        name: "Jan",\n        id: "123",\n    });\n});\n')))}c.isMDXComponent=!0}}]);